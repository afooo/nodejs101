!function(){"use strict";var a=a||{};a.Post=Backbone.Model.extend({url:"/1/post",defaults:{success:!1,errors:[],errfor:{}}}),a.Form=Backbone.Model.extend({url:"/1/post",defaults:{success:!1,errors:[],errfor:{},organizer:"",title:"",url:"",startDate:"",typeTags:"",preview:!0}}),a.PostView=Backbone.View.extend({el:"#course-list",template:_.template($("#tmpl-post-item").html()),events:{},initialize:function(){this.model=new a.Post,this.listenTo(this.model,"sync",this.render)},render:function(){this.$el.html(this.template(this.model.attributes))},syncUp:function(){this.model.fetch()}}),a.FormView=Backbone.View.extend({el:"#submit-form",template:_.template($("#tmpl-submit-form").html()),events:{"submit form":"preventSubmit","click #save-post":"save","click #preview-post":"preview"},initialize:function(){this.model=new a.Form,this.listenTo(this.model,"sync",this.render),this.render()},render:function(){this.$el.html(this.template(this.model.attributes)),$("#datepicker").datepicker()},preventSubmit:function(a){a.preventDefault()},preview:function(){var a=this.model.get("preview");a===!0?(this.$el.find('[name="organizer"]').prop("disabled",!0),this.$el.find('[name="title"]').prop("disabled",!0),this.$el.find('[name="url"]').prop("disabled",!0),this.$el.find('[name="typeTags"]').prop("disabled",!0),this.$el.find('[name="startDate"]').prop("disabled",!0),this.$el.find("#save-post").prop("disabled",!1),this.$el.find("#save-post").removeClass("hide"),this.$el.find("#preview-post").text("我還要修改"),this.model.set("preview",!1)):(this.$el.find('[name="organizer"]').prop("disabled",!1),this.$el.find('[name="title"]').prop("disabled",!1),this.$el.find('[name="url"]').prop("disabled",!1),this.$el.find('[name="typeTags"]').prop("disabled",!1),this.$el.find('[name="startDate"]').prop("disabled",!1),this.$el.find("#save-post").prop("disabled",!0),this.$el.find("#save-post").addClass("hide"),this.$el.find("#preview-post").text("預覽結果"),this.model.set("preview",!0))},save:function(){this.model.set("organizer",this.$el.find('[name="organizer"]').val()),this.model.set("title",this.$el.find('[name="title"]').val()),this.model.set("url",this.$el.find('[name="url"]').val()),this.model.set("typeTags",this.$el.find('[name="typeTags"]').val()),this.model.set("startDate",this.$el.find('[name="startDate"]').val()),this.model.set("preview",!1),this.model.save(this.model.attributes,{success:function(a,b){console.log(b.status),b.success===!0&&"preview"!==b.status&&$("#course-list").addClass("hide")},complete:function(){},error:function(){}})}}),$(document).ready(function(){a.formView=new a.FormView,$("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")||location.hostname==this.hostname){var a=$(this.hash);if(a=a.length?a:$("[name="+this.hash.slice(1)+"]"),a.length)return $("html,body").animate({scrollTop:a.offset().top},1e3),!1}}),$(".btn-submit").on("click",function(){$("#submit-form").removeClass("hide")})})}();
//# sourceMappingURL=index.min.js.map